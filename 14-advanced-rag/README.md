# 14 - 高级 RAG 技术 Demo（Advanced RAG）

本目录包含高级 RAG（检索增强生成）技术的轻量化 Demo，涵盖检索优化、生成质量提升、多模态检索等核心概念和实际应用。

## ✅ 已实现的学习点

### 1. 检索优化技术
- **文件**: `01_retrieval_optimization_demo.py`
- **内容**: 多向量检索、混合检索、重排序、查询扩展
- **示例**: 优化检索结果的相关性和准确性
  - **具体实现**: 定义 `RetrievalStrategy` 枚举（稠密检索、稀疏检索、混合检索、多向量检索）、`Document` 和 `RetrievalResult` 数据类、`QueryExpander` 查询扩展器（同义词扩展）、`Reranker` 重排序器（基于查询词重叠度）、`AdvancedRetrievalSystem` 高级检索系统（支持多种检索策略和重排序）

### 2. 生成质量提升
- **文件**: `02_generation_quality_demo.py`
- **内容**: 提示工程优化、上下文压缩、答案验证、多轮对话
- **示例**: 提升生成答案的准确性和相关性
  - **具体实现**: 提示模板优化、上下文压缩技术、答案验证机制、多轮对话状态管理

### 3. 多模态 RAG
- **文件**: `03_multimodal_rag_demo.py`
- **内容**: 跨模态检索、多模态嵌入、图像文本联合检索
- **示例**: 结合图像和文本进行综合检索
  - **具体实现**: 跨模态嵌入模型、多模态检索策略、图像文本联合索引

### 4. 评估与优化
- **文件**: `04_rag_evaluation_demo.py`
- **内容**: 检索质量评估、生成质量评估、端到端评估、优化策略
- **示例**: 全面评估 RAG 系统性能并制定优化方案
  - **具体实现**: 检索指标计算（召回率、准确率）、生成质量评估（相关性、准确性）、端到端性能测试、优化策略推荐

## 快速开始

### 运行检索优化示例
```bash
cd 14-advanced-rag
python 01_retrieval_optimization_demo.py
```

### 运行生成质量示例
```bash
python 02_generation_quality_demo.py
```

### 运行多模态 RAG 示例
```bash
python 03_multimodal_rag_demo.py
```

### 运行评估与优化示例
```bash
python 04_rag_evaluation_demo.py
```

## 学习要点总结

### 检索优化技术
- 多向量检索：结合多种向量表示提升检索精度
- 混合检索：融合稠密检索和稀疏检索的优势
- 重排序：对初步检索结果进行精细化排序
- 查询扩展：通过同义词等技术扩展查询意图

### 生成质量提升
- 提示工程优化：设计更有效的提示模板
- 上下文压缩：减少冗余信息，提升生成效率
- 答案验证：确保生成内容的准确性和可靠性
- 多轮对话：支持复杂的对话场景

### 多模态 RAG
- 跨模态检索：实现文本和图像的统一检索
- 多模态嵌入：学习跨模态的语义表示
- 联合索引：构建统一的检索索引结构

### 评估与优化
- 检索质量评估：衡量检索系统的性能
- 生成质量评估：评估生成内容的质量
- 端到端评估：全面测试系统整体性能
- 优化策略：基于评估结果制定改进方案

## 下一步学习建议

完成本目录的学习后，建议继续学习：
- 15-integrated-projects：综合项目实战
- 09-langgraph-workflow：LangGraph工作流
- 10-agent-examples：智能体示例

## 常见问题

### Q: 如何选择合适的检索策略？
A: 根据数据特性和应用场景选择：
- 稠密检索：适合语义相似度高的场景
- 稀疏检索：适合关键词匹配场景
- 混合检索：平衡精度和召回率

### Q: 多模态 RAG 需要哪些依赖？
A: 需要安装多模态模型和图像处理库，具体依赖请参考各示例文件。

## 学习目标
- 掌握高级 RAG 技术的核心原理
- 学会优化检索和生成质量
- 理解多模态 RAG 的实现方法
- 能够评估和优化 RAG 系统性能

## 技术栈
- Python 3.8+
- NumPy
- Dataclasses
- Enum
- 向量检索技术
- 多模态嵌入模型

## 项目特色
- 支持多种检索策略（稠密、稀疏、混合、多向量）
- 提供查询扩展和重排序优化
- 包含多模态检索能力
- 提供完整的评估框架
- 支持实时性能监控