# 02 - 提示词模板 Demo（Prompt Templates）

本目录包含 Prompt Templates 的轻量化 Demo，涵盖核心概念和实际应用。

## ✅ 已实现的学习点

### 1. PromptTemplate 与变量
- **文件**: `01_prompt_templates_demo.py`
- **内容**: 基础模板创建、变量插值、格式化输出
- **示例**: 广告文案生成，支持动态变量替换

### 2. Few-shot 与输出约束
- **文件**: `02_few_shot_prompt_template_demo.py`
- **内容**: 示例模板、前缀后缀设置、输出格式约束
- **示例**: 反义词生成，通过示例引导模型输出

### 3. ChatPromptTemplate
- **文件**: `03_chat_prompt_template_demo.py`
- **内容**: 系统消息模板、用户消息模板、消息格式化
- **示例**: 金融文本总结，多角色消息组合

### 4. 结构化输出（JSON/Schema/函数调用）
- **文件**: `04_structured_output_demo.py`
- **内容**: JSON 模式输出、Pydantic 模型约束、函数调用模板、输出解析器集成
- **示例**: 用户信息结构化提取，支持 JSON Schema 和 Pydantic 模型验证
  - **具体实现**: 使用 `JsonOutputParser` 解析 JSON 输出，通过 `PydanticOutputParser` 结合 Pydantic 模型（UserInfo）进行类型约束，构建函数调用模板实现结构化响应

### 5. 模板组合与嵌套
- **文件**: `05_template_composition_demo.py`
- **内容**: 多个模板的组合使用、模板的继承和扩展、动态模板选择
- **示例**: 多步骤对话流程，通过模板组合实现复杂交互逻辑
  - **具体实现**: 基础模板组合（问候+产品介绍）、聊天模板组合（系统+用户消息）、模板继承（扩展基础模板）、动态模板选择（根据用户类型选择模板）、多步骤对话流程（注册→验证→完成）

### 6. 模板验证与错误处理
- **文件**: `06_template_validation_demo.py`
- **内容**: 模板语法验证、变量完整性检查、异常处理机制
- **示例**: 模板变量验证、缺失变量处理、模板语法错误检测
  - **具体实现**: 模板变量验证（未定义变量、未使用变量、命名规范、嵌套大括号检查）、安全格式化模板（处理缺失变量、KeyError 异常）、边界情况处理（空值、None、特殊字符、超长内容、数字布尔值）、模板清理和高级验证规则（变量数量限制、必需变量、禁止模式）

### 7. 性能优化
- **文件**: `07_performance_optimization_demo.py`
- **内容**: 模板缓存机制、批量模板处理、内存优化策略
- **示例**: 模板缓存实现、批量消息处理、内存使用优化
  - **具体实现**: 模板缓存（使用 `lru_cache` 装饰器缓存模板实例）、批量处理（通过 `format_prompt` 方法批量格式化多个输入）、内存优化（对比直接存储与模板工厂模式的内存使用）、懒加载（通过 `LazyTemplateManager` 类实现模板的按需加载）

### 8. 模板国际化与本地化
- **文件**: `08_internationalization_demo.py`
- **内容**: 多语言模板支持、区域化格式处理、动态语言切换
- **示例**: 多语言问候模板、日期时间本地化格式化、货币符号适配
  - **具体实现**: 多语言模板支持（通过 `InternationalizationManager` 类管理多语言模板、获取区域化信息）、区域化格式处理（日期格式、货币符号、数字格式）、动态语言切换（运行时切换语言环境）、多语言问候、本地化日期格式、货币本地化、基于区域设置的格式化、模板翻译

