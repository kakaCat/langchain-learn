# LangChain + LangGraph 全栈 AI 应用开发课程：从 Chatbots 到智能 Agent 系统

## 课程概述

本课程是一个系统性的 LangChain 和 LangGraph 学习路径，旨在帮助开发者从零开始构建完整的 AI 应用。课程覆盖从基础的对话机器人到复杂的智能 Agent 系统开发，通过 10 个渐进式模块，掌握现代 AI 应用开发的核心技能栈。

### 技术栈演进路径
- **基础阶段**：Chatbots → 提示词模板 → 语义识别 → 记忆能力
- **进阶阶段**：Tools 工具集成 → MCP 模型上下文协议 → LangGraph 工作流
- **高级阶段**：Agent/ToDoList → Token 压缩 → 评估与部署

### 学习目标
- 掌握 LangChain 核心概念和组件
- 熟练使用 LangGraph 构建复杂工作流
- 构建生产级的智能 Agent 系统
- 掌握 AI 应用的性能优化和部署策略

## 总体目标
- **从能用到会做**：从基础 Chatbot 开始，逐步掌握语义理解、记忆管理、工具集成、协议规范、工作流编排与智能 Agent 开发
- **技术深度递进**：理解 LangChain 核心概念 → 掌握 LangGraph 状态管理 → 构建复杂 Agent 系统 → 优化性能与部署
- **实践导向**：每个模块产出可独立运行的 Demo，支持 CLI 和 HTTP 接口，包含完整的功能实现和错误处理
- **架构思维**：学习现代 AI 应用架构设计，包括分层设计、防腐层模式、数据转换和业务逻辑分离
- **工程化能力**：掌握评估、监控、安全防护和部署上线全流程，构建可靠可维护的 AI 应用

### 具体学习目标
- **技术掌握**：熟练使用 LangChain 组件、LangGraph 工作流、MCP 协议、工具调用机制
- **架构设计**：能够设计分层清晰的 AI 应用架构，遵循 Controller/Service/Converter/Rule/Wrapper 模式
- **性能优化**：掌握 Token 压缩、上下文管理、缓存策略等成本控制技术
- **生产就绪**：具备评估、监控、安全防护和容器化部署能力
- **问题解决**：能够独立分析和解决 AI 应用开发中的常见问题

### 实践要求
- 每个模块必须产出可运行的独立 Demo
- Demo 包含完整的错误处理和日志记录
- 支持多种接口形态（CLI/HTTP/WebSocket）
- 包含配置管理和环境变量支持
- 提供清晰的运行说明和示例

### 学习路径规划
- **基础阶段（模块 1-3）**：掌握 Chatbot 开发、提示词工程、语义理解
- **进阶阶段（模块 4-6）**：学习记忆管理、工具集成、MCP 协议
- **高级阶段（模块 7-9）**：掌握工作流编排、Agent 开发、性能优化
- **生产阶段（模块 10）**：学习评估监控、安全防护、部署上线

### 技能矩阵
| 技能类别 | 基础能力 | 进阶能力 | 高级能力 |
|---------|---------|---------|---------|
| 对话系统 | 基础 Chatbot | 记忆增强 Chatbot | 工作流化 Agent |
| 提示工程 | 模板使用 | 少样本学习 | 结构化输出 |
| 工具集成 | 基础工具调用 | 自动工具选择 | MCP 协议集成 |
| 状态管理 | 会话记忆 | 实体记忆 | LangGraph 状态机 |
| 性能优化 | 基础配置 | Token 压缩 | 上下文管理 |
| 工程实践 | 本地运行 | 服务化部署 | 生产监控 |

## Demo 组织方式（轻量化）
- 每个模块独立为一个轻量 Demo，互不依赖，便于单独运行与学习。
- 推荐最小目录结构（可更简）：
  - demo 文件（按功能命名，例如：chatbot_basic_cli.py、prompt_templates_demo.py、semantic_router_demo.py、langgraph_workflow_chatbot.py 等）
  - requirements.txt（模块依赖）
  - README.md（运行说明与示例）
  - data/（可选：示例数据）
- 模块目录命名建议（示例）：
  - 01-chatbots-basic/
  - 02-prompt-templates/
  - 03-semantic-intent/
  - 04-memory/
  - 05-tools/
  - 06-mcp/
  - 07-langgraph-workflow/
  - 08-agent-todolist/
  - 09-token-compression/
  - 10-eval-and-deploy/

## 建议节奏
- 6–8 周，总 10 个模块；每周 6–8 小时学习 + 2–4 小时实战。
- 默认 Python（LangChain + FastAPI + LangGraph），可选 TS/JS 对照轨迹。

---

## 模块 1：初识 Chatbots（从零到对话）
- 目标：理解聊天模型、消息角色、温度/Top-p、流式输出与错误处理。
- 内容：ChatModel/LLM 调用；系统/用户/助手角色分离；流式回复与日志。 
- 独立 Demo 产出：最小可用 Chatbot（CLI/HTTP），支持流式与基础日志；独立 requirements.txt 与入口脚本。
- 备注：提供简单错误处理与配置文件示例。

## 模块 2：提示词模板与指令工程（稳定与可控）
- 目标：掌握 PromptTemplate、上下文变量、Few-shot、结构化输出（JSON/Schema/函数调用）。
- 内容：系统指令与风格约束；示例选择与抗幻觉；输出解析与约束。 
- 独立 Demo 产出：模板驱动问答：输入场景变量 → 受控格式答案；支持单独运行与测试。
- 备注：包含几种模板策略的对比示例。

## 模块 3：语义识别与理解（意图路由）
- 目标：意图识别、实体抽取、相似度与分类，服务后续记忆与工具选择。
- 内容：Embeddings；少样本分类；实体识别与槽位填充；任务路由与同义归一。 
- 独立 Demo 产出：语义路由器：把请求分配到问答/搜索/计算/待办等流程；提供独立评测脚本。
- 备注：内置示例意图集合与同义词归一化。

## 模块 4：记忆能力（上下文与长期记忆）
- 目标：设计会话记忆（Buffer/摘要/实体记忆）、边界与清理策略。
- 内容：多轮上下文注入；滚动摘要；实体/键值记忆；记忆污染防护与成本控制。 
- 独立 Demo 产出：带“对话记忆”的 Chatbot：追问、历史摘要查看、手动清理；本地文件或轻量缓存示例。
- 备注：提供不同记忆策略的开关与效果对比。

## 模块 5：Tools 能力（让模型能做事）
- 目标：设计工具 Schema，暴露计算/搜索/文件/DB 等工具；实现自动工具选择。
- 内容：Tool/函数调用；幂等性与安全；可审计轨迹；失败重试与超时。 
- 独立 Demo 产出：自动选择工具的 Chatbot（查资料+计算），返回调用步骤与结果；独立工具注册与日志。
- 备注：提供可插拔工具示例与最小安全校验。

## 模块 6：MCP（Model Context Protocol）（统一协议）
- 目标：理解 MCP 架构，搭建最小 MCP Server 暴露工具/数据源。
- 内容：Server/Client 生命周期；工具注册/发现；上下文与权限策略；错误处理与重试。 
- 独立 Demo 产出：最小 MCP Server（文件/搜索/DB），含使用说明与权限配置；独立客户端联调脚本。
- 备注：演示基本权限白名单与输入校验。

## 模块 7：LangGraph 工作流与状态管理（可恢复的有状态编排）
- 目标：掌握 LangGraph 节点/边、分支与循环、检查点（checkpoint）、有状态对话与任务流。
- 内容：
  - 节点（工具/模型/规则）与边（条件/并行）；可视化与调试；
  - 记忆与上下文在图中的传递；检查点与恢复；
  - 与 LangChain 集成：Graph 作为链上层编排，调用 Retriever/Tools/模型。
- 独立 Demo 产出：工作流化 Chatbot：清洗输入 → 语义路由 → 工具执行 → 结果整合 → 结构化输出；支持失败重试与断点续跑。
- 备注：包含状态对象定义与检查点演示。

## 模块 8：Agent 模式与 ToDoList 编排（基于 LangGraph）
- 目标：将 ReAct/Plan-and-Execute 策略落地到 LangGraph；维护 ToDoList 状态。
- 内容：任务分解、工具选择、反思与重试；在图中持久化 ToDoList（标题/优先级/截止时间/状态）；查询/更新/统计。 
- 独立 Demo 产出：可规划 Agent：分解任务 → 保存/更新 ToDoList → 选工具执行 → 汇总答案；支持任务查询/勾选/优先级调整；独立数据模型与 API。
- 备注：ToDoList Schema 与示例操作命令行/HTTP。

## 模块 9：Token 压缩与上下文管理（成本与质量）
- 目标：系统化管理上下文：摘要压缩、检索式压缩、去重与复用。
- 内容：会话摘要（滚动/分层）；Contextual Compression/Rerank；Chunk 策略与重叠；引用去重；必要上下文最小化。 
- 独立 Demo 产出：压缩策略管理器：自动选择策略；输出压缩前后 Token 统计与质量对比；独立评估脚本。
- 备注：提供不同压缩策略的对比与可视化（文本表格）。

## 模块 10：评估、可观测与安全 + 部署（可靠可维护）
- 目标：端到端评估与监控；保证质量、安全与可运维；服务化上线。
- 内容：评估指标（正确性、相关性、引用覆盖率、稳定性、成本、延迟）；测试数据集与自动评测脚本；调用追踪、结构化日志与指标；提示注入防护与越权检查；FastAPI/WS 流式接口、限流、配置与密钥管理、容器化与 CI/CD。 
- 独立 Demo 产出：可部署的 Chatbot/Agent Demo，带权限控制、敏感信息过滤、监控与评估报告；独立 Dockerfile 与部署脚本（可选）。
- 备注：保留最小可运行与部署示例，避免复杂工程化。

---

## 贯穿式里程碑（Demo 集成）
- 里程碑 A（模块 1–3）：对话 + 模板稳定 + 语义路由（各自独立 Demo）。
- 里程碑 B（模块 4–6）：记忆稳定 + 自动工具 + MCP 协议化（各自独立 Demo）。
- 里程碑 C（模块 7–10）：LangGraph 工作流 + Agent/ToDoList + Token 压缩 + 评估与部署（各自独立 Demo）。

## Capstone（可选，仍以 Demo 形态）
- 工具化 Agent 助手：搜索+计算+文件操作+MCP 接入，基于 LangGraph 编排任务流，含 ToDoList 与压缩策略。
- 知识库问答 Agent：语义识别（主动路由）、记忆与工具选择、LangGraph 工作流整合，输出引用与评估报告。
- 工作流编排 Agent：多步计划、失败重试、反思与检查点，含上下文压缩与安全防护。

## 可选 TS/JS 对照轨迹（2–3 天）
- 严格类型（strict: true）、避免 any（用 unknown）、判别联合、返回 Promise<T>。
- 复杂对象用 interface；类型化状态管理；Error 采用描述性消息。
- Node/Next.js Demo：保持命名规范一致（Controller/Service/Converter/Rule/Wrapper 仅作为可选示例，不做强约束）。

## 下一步
- 选择：一次性创建 10 个 Demo 目录，或先创建 01-chatbots-basic 的 Demo。
- 告诉我模型接入（OpenAI 或本地 Ollama 等）与偏好接口形态（CLI/HTTP）。
- 我将直接在当前目录生成所选 Demo 的骨架与可运行示例，并按此计划推进。
